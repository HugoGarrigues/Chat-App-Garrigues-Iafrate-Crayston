<h1>Bienvenue</h1>
<div>
  <button routerLink="/auth/login">Login</button>
  <button routerLink="/auth/register">Register</button>
</div>

<div *ngIf="user; else noUser">
  <h2>Welcome, {{ user.displayName || user.email }}!</h2>
  <h3>Users Online</h3>
  <ul>
    <li *ngFor="let onlineUser of onlineUsers" (click)="selectUser(onlineUser)">
      {{ onlineUser.displayName || onlineUser.email }}
    </li>
  </ul>

  <div *ngIf="selectedUser">
    <h3>Chat with {{ selectedUser.displayName || selectedUser.email }}</h3>
    <div class="private-messages">
      <div *ngFor="let msg of privateMessages" class="alert alert-info">
        <strong>{{ msg.displayName }}:</strong> {{ msg.text }}
      </div>
    </div>
    <div class="input-container">
      <input type="text" [(ngModel)]="privateMessage" class="form-control" placeholder="Type your private message..." (keydown.enter)="sendPrivateMessage()">
      <button class="btn btn-primary" (click)="sendPrivateMessage()">Send</button>
    </div>
  </div>
</div>

<ng-template #noUser>
  <h2>Please log in or register.</h2>
</ng-template>

<div class="container">
  <div class="chat-container">
    <h2>General Chat</h2>
    <div class="messages">
      <div *ngFor="let msg of messages" class="alert alert-info">
        <strong>{{ msg.displayName }}:</strong> {{ msg.text }}
      </div>
    </div>
    <div class="input-container">
      <input type="text" [(ngModel)]="message" class="form-control" placeholder="Type your message..." (keydown.enter)="sendMessage()">
      <button class="btn btn-primary" (click)="sendMessage()">Send</button>
    </div>
  </div>
</div>
